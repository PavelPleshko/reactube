{"version":3,"file":"10.bundle.js","sources":["webpack:///./src/pages/History.js"],"sourcesContent":["import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\n\r\nimport * as mediaOperations from '../store/states/media/media.operations';\r\nimport * as userOperations from '../store/states/user/user.operations';\r\nimport {selectMedias,selectCurrentPage,\r\n\tselectIsProcessing,noMoreItems,selectPageSize,selectTotal} from '../store/states/media/media.selectors';\r\nimport * as userSelectors from '../store/states/user/user.selectors';\r\n\r\nimport InfiniteScroll from '../components/UI/miscellaneous/InfiniteScroll/InfiniteScroll';\r\n\r\n\r\n//meterial ui\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\n\r\nimport MediaTileHorizontal from '../components/core/MediaTileHorizontal/MediaTileHorizontal';\r\nimport SearchForm from './history/SearchForm';\r\n\r\n\r\nconst styles = theme =>({\r\n\tsearch:{\r\n\t\tbackgroundColor:'rgba(0,0,0,.04)',\r\n\t\theight:'100%',\r\n\t\twidth:'100%',\r\n\t\tposition:'fixed',\r\n\t\ttop:0,\r\n\t\tright:0,\r\n\t},\r\n\ttotal:{\r\n\t\tcolor:theme.palette.primary.grey,\r\n\t\tfontSize:'.8rem',\r\n\t\tmargin:'0 .5rem',\r\n\t\tfontWeight:400\r\n\t}\r\n})\r\n\r\nclass History extends Component{\r\n\r\n\tstate={\r\n\t\tsearched:null\r\n\t}\r\n\r\n\r\n\tcomponentDidMount = () =>{\r\n\t if(this.props.loggedIn){\r\n\t \tlet {currentPage,pageSize,historyMedias,listHistoryMedia} = this.props;\r\n\t\t\tif(historyMedias.length < 1) listHistoryMedia(currentPage,pageSize);\r\n\t }\r\n\t}\r\n\t\r\n\tclearHistory = () =>{\t\r\n\t\tthis.props.clearHistory();\r\n\t}\r\n\r\n\r\n\r\n\tlistHistoryMedia = () =>{\r\n\t\tconst {currentPage,pageSize,searchHistory,listHistoryMedia} = this.props;\r\n\t\tconst {searched} = this.state;\r\n\t\tif(searched){\r\n\t\t\tsearchHistory(searched,currentPage,pageSize);\r\n\t\t}else{\r\n\t\t\tlistHistoryMedia(currentPage,pageSize);\r\n\t\t}\r\n\t}\r\n\r\n\t setRootRef = (element) => {\r\n\t    this.rootRef = element;\r\n\t }\r\n\r\n\t changeSearched = (searched) =>{\r\n\t \tthis.setState({searched});\r\n\t }\r\n\r\n\trender(){\r\n\t\tconst {classes,historyMedias,loggedIn,isProcessing,itemsRequested,total,noMoreItems} = this.props;\r\n\treturn (\r\n\t\t<Grid container spacing={24}>\r\n\t\t<Grid item sm={12}>\r\n\t\t\t<h3>Medias that you viewed \r\n\t\t\t{loggedIn && <span className={classes.total}>\r\n\t\t\t\t(<strong>{total}</strong> in total)\r\n\t\t\t</span>}\r\n\t\t\t</h3>\r\n\t\t\t\r\n\t\t</Grid>\r\n\t\t<Grid item sm={7}>\r\n\t\t\r\n\t\t<div ref={this.setRootRef}>\r\n\t\t\t{loggedIn ? (historyMedias && historyMedias.length ? \r\n\t\t\t\t<InfiniteScroll\r\n\t\t\t\t refContainer={this.rootRef}\r\n\t\t\t\t callback={this.listHistoryMedia}\r\n\t\t\t\t stop={noMoreItems}\r\n\t\t\t\t requested={itemsRequested}\r\n\t\t\t\t >\r\n\t\t\t\t<MediaTileHorizontal items={historyMedias} isProcessing={itemsRequested}/>\r\n\t\t\t\t</InfiniteScroll> : \r\n\t\t\t<div> Your view history is empty </div>) : \r\n\t\t\t<div>\r\n\t\t\tYou have to be logged in to view history. \r\n\t\t\t<Link to=\"/signin\">Log in</Link>\r\n\t\t\t</div>}\r\n\t\t</div>\r\n\t\t\r\n\r\n\t\t</Grid>\r\n\t\t<Grid item sm={3} className={classes.search}>\r\n\t\t\t<SearchForm \r\n\t\t\tchangeSearched={this.changeSearched}\r\n\t\t\tloggedIn={loggedIn} \r\n\t\t\thistoryCount={historyMedias && historyMedias.length}\r\n\t\t\t />\r\n\t\t</Grid>\r\n\t\t</Grid>\r\n\t)\r\n\t}\r\n}\r\n\r\nconst boundActionCreators = (dispatch) =>bindActionCreators({...mediaOperations,...userOperations},dispatch);\r\nconst mappedStateToProps = (state) =>({\r\n  historyMedias:selectMedias(state.media.medias,'history'),\r\n  currentPage:selectCurrentPage(state.media.medias,'history'),\r\n  pageSize:selectPageSize(state.media.medias,'history'),\r\n  total:selectTotal(state.media.medias,'history'),\r\n  itemsRequested:selectIsProcessing(state.media.medias,'history'),\r\n  noMoreItems:noMoreItems(state.media.medias,'history'),\r\n  loggedIn:userSelectors.selectIsAuthenticated(state.user),\r\n  isProcessing:userSelectors.selectIsProcessing(state.user),\r\n\r\n});\r\n\r\nexport default connect(mappedStateToProps,boundActionCreators)(withStyles(styles)(History));"],"mappings":"AAAA","sourceRoot":""}