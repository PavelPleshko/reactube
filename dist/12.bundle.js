(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{221:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a){if(Object.prototype.hasOwnProperty.call(a,r)){e[r]=a[r]}}}return e};var n=a(1);var l=E(n);var o=a(49);var s=a(17);var u=a(10);var i=a(199);var d=a(226);var c=y(d);var f=a(225);var p=y(f);var m=a(117);var v=y(m);var h=a(126);var g=a(637);var b=E(g);function y(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var a in e){if(Object.prototype.hasOwnProperty.call(e,a))t[a]=e[a]}}t.default=e;return t}}function E(e){return e&&e.__esModule?e:{default:e}}class _ extends n.Component{constructor(...e){var t;return t=super(...e),this.state={upload_details:null,redirect_to_login:false},this.submitFormHandler=(e=>{this.props.createMedia(e)}),t}componentDidMount(){(0,h.getDirectUploadDetails)({resourceType:"video"}).then(e=>{if(e.data){this.setState({upload_details:e.data})}else{this.setState({redirect_to_login:true})}});this.props.getCategories();this.props.getTags()}render(){if(this.state.redirect_to_login){return l.default.createElement(o.Redirect,{to:"/signin"})}return l.default.createElement("div",null,l.default.createElement(b.default,{submitForm:this.submitFormHandler,uploadDetails:this.state.upload_details,categories:this.props.categories}))}}const C=e=>(0,u.bindActionCreators)(r({},v,c,p),e);t.default=(0,s.connect)(null,C)(_)},485:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a){if(Object.prototype.hasOwnProperty.call(a,r)){e[r]=a[r]}}}return e};var n=a(1);var l=c(n);var o=a(491);var s=c(o);var u=a(34);var i=a(490);var d=c(i);function c(e){return e&&e.__esModule?e:{default:e}}const f=e=>({textInput:{width:"100%"}});class p extends n.Component{render(){const{classes:e,adornment:t,label:a,input:n,type:o,helperText:u,multiline:i}=this.props;return l.default.createElement(s.default,r({label:a,type:o||"text",className:e.textInput},n,{multiline:i,margin:u?"dense":"normal",helperText:u,InputProps:{startAdornment:t&&l.default.createElement(d.default,{position:"start"},t)}}))}}p.defaultProps={helperText:"",multiline:false};t.default=(0,u.withStyles)(f)(p)},488:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=e=>{let t="";let a=Math.floor(e/3600);let r=Math.floor(e%3600/60);let n=Math.floor(e%3600%60);t=a>0?a+"h ":"";t+=r>0?r+"min ":"";t+=n>0?n+"s":"";return t};const n=e=>{let t=["Bytes","KB","MB","GB","TB"];if(e==0)return"0 Byte";let a=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,a),2)+" "+t[a]};const l=e=>{const t=new Date(Number(e)*1e3);const a=t.getUTCHours();let r=t.getUTCMinutes();const n=("0"+t.getUTCSeconds()).slice(-2);if(a){r=("0"+t.getUTCMinutes()).slice(-2);return`${a}:${r}:${n}`}return`${r}:${n}`};const o=["January","February","March","April","May","June","July","August","September","October","November","December"];function s(e,t=false,a=false){const r=e.getDate();const n=o[e.getMonth()];const l=e.getFullYear();const s=e.getHours();let u=e.getMinutes();if(u<10){u=`0${u}`}if(t){return`${t} at ${s}:${u}`}if(a){return`${r} ${n} at ${s}:${u}`}return`${r} ${n} ${l}. at ${s}:${u}`}const u=e=>{if(!e){return null}const t=typeof e==="object"?e:new Date(e);const a=864e5;const r=new Date;const n=new Date(r-a);const l=Math.round((r-t)/1e3);const o=Math.round(l/60);const u=r.toDateString()===t.toDateString();const i=n.toDateString()===t.toDateString();const d=r.getFullYear()===t.getFullYear();if(l<5){return"now"}else if(l<60){return`${l} seconds ago`}else if(l<90){return"about a minute ago"}else if(o<60){return`${o} minutes ago`}else if(u){return s(t,"Today")}else if(i){return s(t,"Yesterday")}else if(d){return s(t,false,true)}return s(t)};t.transformSeconds=r;t.transformBytes=n;t.formatDuration=l;t.fromNow=u},523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=f(r);var l=a(199);var o=a(17);var s=a(555);var u=f(s);var i=a(34);var d=a(517);var c=f(d);function f(e){return e&&e.__esModule?e:{default:e}}const p=e=>({uploadIcon:{fontSize:"14rem",color:e.palette.primary.light,opacity:".2"},caption:{color:e.palette.primary.grey}});class m extends r.Component{constructor(...e){var t;return t=super(...e),this.state={offset_value:0,thumb_url:""},this.componentWillMount=(()=>{let{thumb_url:e}=this.props;if(e){this.setState({thumb_url:e})}}),this.getVideoThumb=(e=>{let{secure_url:t}=this.props.video;let a=t.replace(/\.(mp4|mpeg|avi|3gp)$/gm,"");let r=".jpg";e=e?`so_${e}`:"so_0";let n="q_35/";let l=a.replace("/upload/",`/upload/${e}`)+r;let o=l.lastIndexOf("/");l=l.slice(0,o+1)+n+l.slice(o+1,l.length);return l}),this.handleThumbChange=((e,t)=>{let a=this.getVideoThumb(t);this.props.dispatch((0,l.change)("mediaInfo","thumb_url",a));this.setState({thumb_url:a,offset_value:t})}),this.componentDidUpdate=((e,t)=>{if(e.video!=this.props.video){let e=this.props.thumb_url||this.getVideoThumb(this.state.offset_value);this.props.dispatch((0,l.change)("mediaInfo","thumb_url",e));this.setState({thumb_url:e})}}),t}render(){const{classes:e,video:{duration:t}}=this.props;const{thumb_url:a}=this.state;return n.default.createElement("div",null,a?n.default.createElement("div",null,n.default.createElement("h5",{className:e.caption},"Customize thumbnail for your video"),n.default.createElement("img",{src:a,width:"100%",height:"auto"}),n.default.createElement(c.default,{value:this.state.offset_value,min:0,max:t,step:5,onChange:this.handleThumbChange})):n.default.createElement(u.default,{className:e.uploadIcon}))}}t.default=(0,o.connect)()((0,i.withStyles)(p)(m))},527:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a){if(Object.prototype.hasOwnProperty.call(a,r)){e[r]=a[r]}}}return e};var n=a(1);var l=_(n);var o=a(34);var s=a(491);var u=_(s);var i=a(87);var d=_(i);var c=a(119);var f=_(c);var p=a(557);var m=_(p);var v=a(526);var h=_(v);var g=a(556);var b=_(g);var y=a(54);var E=_(y);function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t){var a={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;a[r]=e[r]}return a}const x=e=>({root:{flexGrow:1,height:350},container:{flexGrow:1,position:"relative"},paper:{position:"absolute",zIndex:4,marginTop:e.spacing.unit,left:0,right:0},chip:{margin:`${e.spacing.unit/2}px ${e.spacing.unit/3}px .2rem 0`},inputRoot:{flexWrap:"wrap",fontSize:".9rem",padding:".3rem 0 .4rem 0",marginTop:".4rem"}});function S(e){const{InputProps:t,classes:a,ref:n}=e,o=C(e,["InputProps","classes","ref"]);return l.default.createElement(u.default,r({multiline:true,InputProps:r({inputRef:n,classes:{root:a.inputRoot}},t)},o))}function M(e,t){let a=0;return t.filter(t=>{const r=(!e||t.title.toLowerCase().indexOf(e.toLowerCase())!==-1)&&a<5;if(r){a+=1}return r})}function w({suggestion:e,index:t,itemProps:a,highlightedIndex:n,selectedItem:o}){const s=n===t;const u=(o||"").indexOf(e.title)>-1;return l.default.createElement(f.default,r({},a,{key:e._id,selected:s,style:{fontWeight:u?500:400}}),e.title)}class I extends n.Component{constructor(...e){var t;return t=super(...e),this.state={inputValue:"",selectedItem:[],initialized:false},this.handleKeyDown=(e=>{const{inputValue:t,selectedItem:a}=this.state;if(a.length&&!t.length&&(0,E.default)(e)==="backspace"){this.setState({selectedItem:a.slice(0,a.length-1)})}}),this.handleInputChange=(e=>{this.setState({inputValue:e.target.value})}),this.handleChange=(e=>{let{selectedItem:t}=this.state;if(t.findIndex(t=>t._id==e._id)===-1){t=[...t,e];this.props.input.onChange(t.map(e=>e._id))}this.setState({inputValue:"",selectedItem:t})}),this.handleDelete=(e=>()=>{this.setState(t=>{const a=[...t.selectedItem];a.splice(a.indexOf(e),1);this.props.input.onChange(a.map(e=>e._id));return{selectedItem:a}})}),t}render(){const{classes:e,suggestions:t}=this.props;const{inputValue:a,selectedItem:r}=this.state;return l.default.createElement(m.default,{itemToString:e=>e?e.title:"",inputValue:a,onChange:this.handleChange,selectedItem:r},({getInputProps:a,getItemProps:n,isOpen:o,inputValue:s,selectedItem:u,highlightedIndex:i})=>l.default.createElement("div",{className:e.container},S({fullWidth:true,classes:e,InputProps:a({startAdornment:r.map(t=>l.default.createElement(h.default,{key:t._id,tabIndex:-1,label:t.title,className:e.chip,onDelete:this.handleDelete(t._id)})),onChange:this.handleInputChange,onKeyDown:this.handleKeyDown,placeholder:"Add tags",id:"integration-downshift-multiple"})}),o?l.default.createElement(d.default,{className:e.paper,square:true},M(s,t).map((e,t)=>w({suggestion:e,index:t,itemProps:n({item:e}),highlightedIndex:i,selectedItem:u}))):null))}}I.getDerivedStateFromProps=((e,t)=>{let{input:{value:a}}=e;if(a||a===""){a=a===""?[]:a;if(typeof a[0]=="string"){a=e.suggestions.filter(e=>a.includes(e._id))}return{selectedItem:a}}else{return null}});t.default=(0,o.withStyles)(x)(I)},528:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=m(r);var l=a(203);var o=a(17);var s=a(210);var u=a(199);var i=a(527);var d=m(i);var c=a(85);var f=m(c);var p=a(34);function m(e){return e&&e.__esModule?e:{default:e}}const v=e=>({header:{color:e.palette.primary.grey,borderBottom:`1px dashed ${e.palette.primary.lightGrey}`}});class h extends r.Component{render(){const{classes:e}=this.props;return n.default.createElement(n.default.Fragment,null,n.default.createElement(f.default,{variant:"body2",className:e.header},"Additional information"),n.default.createElement(u.Field,{label:"Tags",name:"tags",component:d.default,suggestions:this.props.tags}))}}const g=e=>({tags:(0,s.selectAllTags)(e.media.tags)});t.default=(0,o.connect)(g)((0,p.withStyles)(v)(h))},529:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=m(r);var l=a(119);var o=m(l);var s=a(507);var u=m(s);var i=a(542);var d=m(i);var c=a(513);var f=m(c);var p=a(34);function m(e){return e&&e.__esModule?e:{default:e}}const v=e=>({formControl:{minWidth:"100%",textAlign:"left",marginTop:".5rem"}});class h extends r.Component{render(){let{classes:e,label:t,options:a,input:{value:r,onChange:l},name:s}=this.props;if(typeof r=="object"){r=r._id}return n.default.createElement(u.default,{className:e.formControl},n.default.createElement(f.default,{htmlFor:t},"Category"),n.default.createElement(d.default,{value:r,onChange:l,name:s},n.default.createElement(o.default,{value:""},n.default.createElement("em",null,"None")),a.map(e=>{return n.default.createElement(o.default,{key:e._id,value:e._id},e.title)})))}}t.default=(0,p.withStyles)(v)(h)},530:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=l(r);function l(e){return e&&e.__esModule?e:{default:e}}class o extends r.Component{render(){const{input:{value:e,onChange:t}}=this.props;return n.default.createElement("input",{value:e,onChange:t,hidden:true})}}t.default=o},531:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=g(r);var l=a(203);var o=a(17);var s=a(199);var u=a(485);var i=g(u);var d=a(530);var c=g(d);var f=a(529);var p=g(f);var m=a(85);var v=g(m);var h=a(34);function g(e){return e&&e.__esModule?e:{default:e}}const b=e=>({header:{color:e.palette.primary.grey,borderBottom:`1px dashed ${e.palette.primary.lightGrey}`}});class y extends r.Component{render(){const{classes:e}=this.props;return n.default.createElement("div",null,n.default.createElement(v.default,{variant:"body2",className:e.header},"Main information"),n.default.createElement(s.Field,{label:"Title*",helperText:"Come up with a title",name:"title",component:i.default}),n.default.createElement(s.Field,{label:"Description*",helperText:"Shortly describe the video",multiline:true,name:"description",component:i.default}),n.default.createElement(s.Field,{label:"Category*",name:"category",component:p.default,options:this.props.categories}),n.default.createElement(s.Field,{name:"video_url",component:c.default}),n.default.createElement(s.Field,{name:"duration",component:c.default}))}}const E=e=>({categories:(0,l.selectAllCategories)(e.media.categories)});t.default=(0,o.connect)(E)((0,h.withStyles)(b)(y))},532:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=g(r);var l=a(199);var o=a(85);var s=g(o);var u=a(486);var i=g(u);var d=a(34);var c=a(197);var f=g(c);var p=a(531);var m=g(p);var v=a(528);var h=g(v);function g(e){return e&&e.__esModule?e:{default:e}}const b=e=>({card:{padding:"1rem 2.5rem",marginBottom:".5rem",overflow:"visible"},buttonCreate:{color:"#fff",backgroundColor:e.palette.primary.success,"&:hover":{backgroundColor:e.palette.primary.successHover}},rightIcon:{marginLeft:"1rem"},header:{padding:".3rem 2.5rem",marginBottom:".5rem",display:"flex"},header2:{color:e.palette.primary.grey,borderBottom:`1px dashed ${e.palette.primary.lightGrey}`}});class y extends r.Component{constructor(...e){var t;return t=super(...e),this.handleSubmit=(e=>{this.props.submitForm(e)}),t}render(){const{classes:e,submitBtnText:t,media:a}=this.props;return n.default.createElement("form",{onSubmit:this.props.handleSubmit(this.handleSubmit)},n.default.createElement(i.default,{className:e.card},n.default.createElement(m.default,{media:a})),n.default.createElement(i.default,{className:e.card},n.default.createElement(h.default,{media:a})),n.default.createElement(f.default,{fullWidth:true,className:e.buttonCreate,type:"submit"},t))}}t.default=(0,l.reduxForm)({form:"mediaInfo"})((0,d.withStyles)(b)(y))},533:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=y(r);var l=a(49);var o=a(197);var s=y(o);var u=a(496);var i=y(u);var d=a(495);var c=y(d);var f=a(494);var p=y(f);var m=a(493);var v=y(m);var h=a(492);var g=y(h);var b=a(34);function y(e){return e&&e.__esModule?e:{default:e}}function E(e,t){var a={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;a[r]=e[r]}return a}const _=e=>({success:{color:"#ffffff",backgroundColor:e.palette.primary.success,"&:hover":{backgroundColor:e.palette.primary.successHover}},error:{color:"#ffffff",backgroundColor:e.palette.primary.error,"&:hover":{backgroundColor:e.palette.primary.errorHover}},standard:{color:"#ffffff",backgroundColor:e.palette.primary.standard,"&:hover":{backgroundColor:e.palette.primary.standardHover}}});const C=e=>{let{open:t,close:a,title:r,linkToPage:o,actionBtnText:u,type:d}=e,f=E(e,["open","close","title","linkToPage","actionBtnText","type"]);const m=f.classes;return n.default.createElement(i.default,{open:t,disableBackdropClick:true},n.default.createElement(c.default,null,r),n.default.createElement(p.default,null,n.default.createElement(g.default,null,f.children)),n.default.createElement(v.default,null,o?n.default.createElement(l.Link,{to:o},n.default.createElement(s.default,{className:m[d],autoFocus:"autoFocus",variant:"raised"},u)):n.default.createElement(s.default,{onClick:a,className:m[d],autoFocus:"autoFocus",variant:"raised"},u)))};t.default=(0,b.withStyles)(_)(C)},624:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=C(r);var l=a(34);var o=a(197);var s=C(o);var u=a(623);var i=C(u);var d=a(619);var c=C(d);var f=a(610);var p=C(f);var m=a(609);var v=C(m);var h=a(604);var g=C(h);var b=a(497);var y=C(b);var E=a(603);var _=C(E);function C(e){return e&&e.__esModule?e:{default:e}}const x=e=>({root:{height:380},speedDial:{position:"absolute",bottom:e.spacing.unit*2,right:e.spacing.unit*3}});const S=[{icon:n.default.createElement(g.default,null),name:"Save draft"},{icon:n.default.createElement(y.default,null),name:"Cancel"}];class M extends r.Component{constructor(...e){var t;return t=super(...e),this.state={open:false},this.handleOpen=(()=>{if(!this.state.hidden){this.setState({open:true})}}),this.handleClose=(()=>{this.setState({open:false})}),t}render(){const{classes:e}=this.props;const{open:t}=this.state;return n.default.createElement(i.default,{ariaLabel:"SpeedDial openIcon example",className:e.speedDial,icon:n.default.createElement(c.default,{openIcon:n.default.createElement(_.default,null)}),onBlur:this.handleClose,onClose:this.handleClose,onFocus:this.handleOpen,onMouseEnter:this.handleOpen,onMouseLeave:this.handleClose,open:t},S.map(e=>n.default.createElement(v.default,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:this.handleClick})))}}t.default=(0,l.withStyles)(x)(M)},630:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=I(r);var l=a(486);var o=I(l);var s=a(128);var u=I(s);var i=a(122);var d=I(i);var c=a(231);var f=I(c);var p=a(525);var m=I(p);var v=a(211);var h=I(v);var g=a(230);var b=I(g);var y=a(629);var E=I(y);var _=a(628);var C=I(_);var x=a(627);var S=I(x);var M=a(34);var w=a(488);function I(e){return e&&e.__esModule?e:{default:e}}const O=e=>({card:{padding:".2rem 1rem",marginBottom:".5rem"}});class T extends r.PureComponent{render(){const{file:{bytes:e,duration:t,width:a,height:r},classes:l}=this.props;return n.default.createElement(o.default,{className:l.card},n.default.createElement(u.default,{subheader:n.default.createElement(b.default,null,"About the file")},n.default.createElement(d.default,null,n.default.createElement(f.default,null,n.default.createElement(E.default,null)),n.default.createElement(h.default,{primary:"Duration"}),n.default.createElement(m.default,null,(0,w.transformSeconds)(t))),n.default.createElement(d.default,null,n.default.createElement(f.default,null,n.default.createElement(C.default,null)),n.default.createElement(h.default,{primary:"Size"}),n.default.createElement(m.default,null,(0,w.transformBytes)(e))),n.default.createElement(d.default,null,n.default.createElement(f.default,null,n.default.createElement(S.default,null)),n.default.createElement(h.default,{primary:"Dimensions"}),n.default.createElement(m.default,null,a," x ",r))))}}t.default=(0,M.withStyles)(O)(T)},636:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=E(r);var l=a(8);var o=E(l);var s=a(0);var u=E(s);var i=a(635);var d=E(i);var c=a(204);var f=E(c);var p=a(506);var m=E(p);var v=a(634);var h=E(v);var g=a(197);var b=E(g);var y=a(34);function E(e){return e&&e.__esModule?e:{default:e}}const _=e=>({wrapper:{margin:"1rem",position:"relative",display:"inline"},buttonSuccess:{backgroundColor:e.palette.primary.success,pointerEvents:"none"},fabProgress:{color:e.palette.primary.success,position:"absolute",top:-4.5,left:-6,zIndex:1,transition:".2s"},buttonProgress:{color:e.palette.primary.success,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},buttonStandard:{backgroundColor:e.palette.primary.standard,"&:hover":{backgroundColor:e.palette.primary.standardHover}},button:{marginLeft:".5rem",color:"#fff"},disabled:{backgroundColor:"#ccc",color:"#eeeeee",pointerEvents:"none"},buttonError:{backgroundColor:e.palette.primary.error,"&:hover":{backgroundColor:e.palette.primary.errorHover}}});const C={disabled:{buttonClassName:"disabled",buttonText:"No file selected",buttonIcon:n.default.createElement(d.default,null)},active:{buttonClassName:"buttonStandard",buttonText:"Start upload",buttonIcon:n.default.createElement(d.default,null)},loading:{buttonClassName:"buttonStandard",buttonText:"Uploading now",buttonIcon:n.default.createElement(d.default,null)},success:{buttonClassName:"buttonSuccess",buttonText:"Finished",buttonIcon:n.default.createElement(m.default,null)},error:{buttonClassName:"buttonError",buttonText:"Try again",buttonIcon:n.default.createElement(h.default,null)}};const x=({classes:e,progress:t,startUploading:a,status:r})=>{const l=C[r];const s=(0,o.default)({[e.button]:true,[e[l.buttonClassName]]:true});return n.default.createElement("div",{className:e.wrapper},n.default.createElement(b.default,{variant:"fab",className:s},l.buttonIcon,r=="loading"&&n.default.createElement(f.default,{size:66,variant:"determinate",value:t,className:e.fabProgress})),n.default.createElement(b.default,{variant:"contained",onClick:a,className:s},l.buttonText))};x.propTypes={status:u.default.string.isRequired};t.default=(0,y.withStyles)(_)(x)},637:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(1);var n=N(r);var l=a(0);var o=N(l);var s=a(34);var u=a(486);var i=N(u);var d=a(499);var c=N(d);var f=a(198);var p=N(f);var m=a(85);var v=N(m);var h=a(199);var g=a(17);var b=a(636);var y=N(b);var E=a(532);var _=N(E);var C=a(630);var x=N(C);var S=a(523);var M=N(S);var w=a(624);var I=N(w);var O=a(533);var T=N(O);var P=a(126);function N(e){return e&&e.__esModule?e:{default:e}}function D(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function r(n,l){try{var o=t[n](l);var s=o.value}catch(e){a(e);return}if(o.done){e(s)}else{return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}}return r("next")})}}const k=e=>({root:{margin:"auto",maxWidth:"70%",marginTop:e.spacing.unit*5},card:{padding:"1.5rem 2.5rem",textAlign:"center"},cardContent:{position:"relative",minHeight:"350px"},caption:{position:"relative",display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center"},btnIcon:{marginRight:".4rem"},input:{display:"none"},chooseFile:{marginBottom:".4rem",fontWeight:"700","&:hover":{color:e.palette.primary.light,cursor:"pointer"}},fileName:{marginTop:".3rem",fontSize:".8rem"},fileActions:{bottom:0,position:"absolute",left:"14%"}});class F extends r.Component{constructor(...e){var t,a;return t=a=super(...e),this.state={file:"",progress:0,loading:false,video:"",thumb_url:"",error:"",status:"disabled",dialogOpened:false},this.handleChange=(e=>{this.setState({file:e.target.files[0],status:"active"})}),this.updateProgress=(e=>{let t=Math.round(e.loaded/e.total*100);this.setState({progress:t,loading:t==100?false:true})}),this.startUploading=D(function*(){yield a.setState({loading:true,status:"loading",progress:0});let e=a.state.file;let t=a.props.uploadDetails.upload_link;let r=a.props.uploadDetails.cloud_preset;let n=new FormData;n.append("file",e);n.append("upload_preset",r);(0,P.uploadVideo)(n,t,a.updateProgress).then(function(e){let t=e;a.props.dispatch((0,h.change)("mediaInfo","video_url",t.secure_url));a.props.dispatch((0,h.change)("mediaInfo","duration",t.duration));a.setState({video:t,status:"success"})}).catch(function(e){a.setState({error:e,status:"error",dialogOpened:true})})}),this.closeDialog=(()=>{this.setState({dialogOpened:false})}),t}render(){const{classes:e}=this.props;return n.default.createElement(n.default.Fragment,null,n.default.createElement(T.default,{open:!!(this.state.error&&this.state.dialogOpened),close:this.closeDialog,title:"Error",type:"error",actionBtnText:"Dismiss"},this.state.error),n.default.createElement(p.default,{container:true,spacing:24,className:e.root},n.default.createElement(p.default,{item:true,xs:8},n.default.createElement(i.default,null,n.default.createElement(c.default,{className:e.cardContent},n.default.createElement("div",{className:e.fileActions},n.default.createElement(I.default,null)),n.default.createElement("div",{className:e.caption},n.default.createElement("span",{className:e.fileName},this.state.file&&n.default.createElement("div",null,"Filename:",n.default.createElement("strong",null,this.state.file.name))),n.default.createElement(M.default,{video:this.state.video}),n.default.createElement("label",{htmlFor:"icon-button-file"},n.default.createElement(v.default,{color:"textSecondary",variant:"subheading",className:e.chooseFile},this.state.status!=="finished"&&(this.state.file?"Click to select another file":"Click to select a file"))),n.default.createElement("input",{accept:"video/*",onChange:this.handleChange,className:e.input,id:"icon-button-file",type:"file"}),n.default.createElement(y.default,{progress:this.state.progress,startUploading:this.startUploading,status:this.state.status}))))),n.default.createElement(p.default,{item:true,xs:4},this.state.video&&n.default.createElement(x.default,{file:this.state.video}),n.default.createElement(_.default,{submitForm:this.props.submitForm,submitBtnText:"Publish media"}))))}}F.propTypes={uploadDetails:o.default.object};t.default=(0,g.connect)()((0,s.withStyles)(k)(F))}}]);
//# sourceMappingURL=12.bundle.js.map